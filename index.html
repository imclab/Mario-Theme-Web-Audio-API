    <!DOCTYPE html>  
    <html>  
      <head>  
        <title>Mario Theme Tune with JavaScript</title>
        
        <script type="text/javascript" src="ToneGenerator.js"></script>
        <script type="text/javascript" src="tune.js"></script>
          
        <link rel="stylesheet" href="css/style.css?v=32">
	       <link rel="stylesheet" href="css/screen.css?v=32">  
          
      </head>  
      <body>  
      
        <header>
      		<h1>My Playground <a href="http://twitter.sydlawrence.com">@sydlawrence</a></h1>
      	</header>
      	<div id="main">
      
        <h1>Mario Theme using the Audio API</h1>
        <p>
          <button onclick="start()">play</button>  
          <button onclick="stop()">stop</button> 
        </p>
        <p>Currently this only works on Firefox, but I am working on it...</p>
        <p>The whole tune is generated purely using javascript and the browser APIs.</p>
        
        <p>For more information on the Audio API visit the <a href="https://developer.mozilla.org/en/Introducing_the_Audio_API_Extension">Mozilla Developer Network</a></p> 
      
        <script type="text/javascript">    
    
          var currentNote = 0;
        
          var loops = 1; // does not loop (-1 = forever)
          
          var currentLoop = 0;
             
          
          var noteTimeout;
               
          function nextNote() {
                        
            duration = tune[currentNote].duration;
            type = tune[currentNote].type;

            switch (type) {
              case "beep" :
                frequency = tune[currentNote].frequency;
                break;          
              case "delay" :
                frequency = 0;
                break;
            }

            currentNote++;
            if (currentNote >= tune.length) {
              currentNote = 0;
              currentLoop++;
            }
            
            // still looping
            if (currentLoop < loops || loops === -1) {
              noteTimeout = setTimeout("nextNote()",duration);
            }
            // stop
            else {
              stop();
              
            }
            
          }   
      
      
          function start() {  
            currentSoundSample = 0;
            nextNote(); 
          }  
      
          function stop() {  
            pause();
            currentNote = 0;
            currentLoop = 0;
          }  
          
          function pause() {
            frequency = 0;
            clearTimeout(noteTimeout);
          }
      </script> 
      
      </div>

	<footer>
		<a href="http://sydlawrence.com">Handcrafted by Syd</a>
	</footer>
	
	<a href="https://github.com/sydlawrence/Mario-Theme-Web-Audio-API"><img style="position: absolute; top: 0; right: 0; border: 0;z-index:999" src="https://a248.e.akamai.net/assets.github.com/img/7afbc8b248c68eb468279e8c17986ad46549fb71/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub"></a>
      
      <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-7654450-4']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
       
      </body>  
    </html>  
